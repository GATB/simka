--------------------------------------------------------------------------------
# What is GATB ?

GATB means "Genome Analysis Toolbox with de-Bruijn graph".

The GATB-CORE project provides a set of highly efficient algorithms to analyse NGS data sets. These 
methods enable the analysis of data sets of any size on multi-core desktop computers, including very 
huge amount of reads data coming from any kind of organisms such as bacteria, plants, animals and 
even complex samples (e.g. metagenomes). More: https://project.inria.fr/gatb/.

Read more about GATB at <a href="https://project.inria.fr/gatb/">https://project.inria.fr/gatb</a>.
 
You can download GATB softwares at <a href="https://project.inria.fr/gatb/software/">https://project.inria.fr/gatb/software</a>.

--------------------------------------------------------------------------------
# What is GATB-CORE ?

GATB-CORE is a high-performance and low memory footprint C++ library.

Among others, it supports the following operations natively:
* FASTA/FASTQ parsing
* K-mer counting
* Minimizer computation of k-mers, partitioning of datasets by minimizers
* de Bruijn graph construction
* de Bruijn graph traversal operations (contigs, unitigs)

By itself GATB-CORE is not an NGS data analysis tool. However, it can be 
used to create such tools; see below section called 'How to quickly create a project based on gatb-core ?'.

They already exist a set of ready-to-use tools relying on GATB-CORE library: see https://project.inria.fr/gatb/software/

All the needed material of GATB-CORE is contained in the current directory in order to 
generate the wanted artifacts:  

* dynamic and static libraries holding the services component

* unit tests of the component

* wrappers for the components in other languages like java, python, ... (to be done)

Since the compilation is based on CMake (release 2.6+), a common way to build all the artifacts is:

	mkdir build ; cd build ; cmake .. ; make

By default, the library is compiled for supporting 4 ranges of kmers : 

* k1 : for kmerSize < k1  (default value 32)         
* k2 : for k1 <= kmerSize < k2 (default value 64)
* k3 : for k2 <= kmerSize < k3 (default value 96)
* k4 : for k3 <= kmerSize < k4 (default value 128)

You can customize these values through cmake, provided they rebuild the project from scratch. For instance:

    rm -Rf build; mkdir build ; cd build ; cmake -DKSIZE_LIST="64 96 128 162" ..

Tools may set a default kmer lists in their CMakeFiles.txt, as such (see for instance Minia):

    list (APPEND KSIZE_DEFAULT_LIST  32   64   96  128  160  192  224  256)

The documentation can be generated by "make doc" and is available at _build/html/index.html_

and the unit tests can be launched by "make test"  (note: you will need to have cppunit for this).
	
--------------------------------------------------------------------------------
# Dependencies

The following third parties should be already installed:

* cmake (mandatory)
* doxygen
* cppunit

--------------------------------------------------------------------------------
# Directory content

* __README__:                  this file

* __CMakeList.txt__:           global cmake file

* __doc__:                 
    * __design__      design documentation for the component
    * __doxygen__     pages for doxygen

* __examples__:       snippets showing how to use the library                 

* __src__:            source code for the component

* __test__:           tests directory
    * __src__         source code for unit tests
    * __db__          FASTA databases for unit tests

* __thirdparty__:    third parties    

--------------------------------------------------------------------------------
# Details for 'src' directory content

It contains several sub directories, each one corresponding to one software package.

A package may be composed of sub packages; the directory hierarchy should represent
this packages tree structure.

For one atomic package (or sub package), we should have:

* directory 'api'       API of the package  

* directory 'impl'      several implementations of the API

--------------------------------------------------------------------------------
# How to quickly create a project based on GATB-CORE ?

You use GATB-CORE by creating a new tool project, with the following script:

    sh scripts/NewProject/NewProject.sh  -d directory -n toolName

where 'directory' is the directory where the project will be created and 'toolName' is the name of the project.
The script will automatically creates the full path directory/toolName to deploy a self-contained tool.
 
By default, the following part will be included in the project:
    * a CMakeLists.txt file used for building the project
    * a 'tools' directory holding a default source code using GATB-Core
    * a 'scripts' directory holding a script to automatically package the tool
    * an optional 'thirdparty' directory holding the gatb-core resources

The 'thirdparty' directory is only available for tool created outside the GATB-Tools repository.
Tools located within GATB-Tools rely on a common GATB-CORE sub-module already available in this repository.

The directory where the project is created has no link to any external resources. You can therefore
move it anywhere you want.

Such a project can be a start for building applications based on GATB-CORE. 

More on creating a new GATB-Core based project: http://gatb-core.gforge.inria.fr/doc/api/new_project.html

----------------------------------------------------------------------------------
# Notes for GATB-core developers

To compile in debug mode, type.

    mkdir build ; cd build && cmake -Ddebug=1 .. && make -j


To run unit tests:

    compile using the command above (-Ddebug=1 isn't necessary) and type:

        bin/gatb-core-cppunit


    One may set the environment variable CPPUNIT_VERBOSE to 1 to known which tests pass.
    The gatb-core-cppunit command may also take as argument the categories of tests that
    show up in the verbose output, e.g. 'bin/gatb-core-cppunit TestBank'.


To upload the documentation to the http://gatb-core.gforge.inria.fr/doc/api website, type:

    mkdir build ; cd build ; cmake .. ; make doc ; make deploy-doc
